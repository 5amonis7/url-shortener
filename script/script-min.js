const hamburger = document.querySelector(".hamburger"), menu = document.querySelector(".menu"), longLink = document.querySelector(".long-link"), activateShorten = document.querySelector("#activate-shorten"), links = document.querySelector("#links"), copy = document.querySelectorAll(".copy"), invalid = document.querySelector("#invalid"); let newLinks = [], state = !1; function urlShorten() { if ("" === longLink.value || !1 === isUrlValid(longLink.value)) longLink.style.border = "2px solid red", longLink.classList.add("empty"), invalid.style.display = "block", longLink.value = ""; else { longLink.style.border = "none", longLink.classList.remove("empty"), invalid.style.display = "invalid"; let e = longLink.value; fetch("https://api.shrtco.de/v2/shorten?url=" + e).then(e => e.json()).then(e => { newLinks.push(e) }).then(() => { links.innerHTML = "<div></div>", newLinks.map((e, n) => { let t = e.result.short_link; links.insertAdjacentHTML("beforeend", `<div class="output">\n                            <p class="input-link">${e.result.original_link}</p>\n\n                            <div>\n                            <p id="value${n}" class="output-link">${t}</p>\n                            <button id="copy${n}" onclick="copied(${n})" class="copy">Copy</button>\n                            </div>\n                        </div>`) }) }).then(longLink.value = "") } } function isUrlValid(e) { return null != e.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g) } function copied(e) { let n = document.querySelector(`#value${e}`).innerText; navigator.clipboard.writeText(n); const t = document.querySelector(`#copy${e}`); t.style.backgroundColor = "hsl(257, 27%, 26%)", t.innerText = "Copied!" } hamburger.addEventListener("click", () => { state ? (menu.style.height = "0", state = !1) : (menu.style.height = "20rem", state = !0) }), activateShorten.addEventListener("click", urlShorten), longLink.addEventListener("keypress", e => { "Enter" === e.key && urlShorten() });